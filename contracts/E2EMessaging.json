{
  "abi": [
    {
      "inputs": [],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "sender",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "receiver",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "time",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "text",
          "type": "string"
        }
      ],
      "name": "Message",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "sender",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "receiver",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "index",
          "type": "uint256"
        }
      ],
      "name": "MessageCleared",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "who",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "key",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "key_type",
          "type": "string"
        }
      ],
      "name": "PublicKeyUpdated",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_to",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_index",
          "type": "uint256"
        }
      ],
      "name": "clearMessage",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_who",
          "type": "address"
        }
      ],
      "name": "getLastMessage",
      "outputs": [
        {
          "internalType": "address",
          "name": "_from",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "_text",
          "type": "string"
        },
        {
          "internalType": "uint256",
          "name": "_time",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_who",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_index",
          "type": "uint256"
        }
      ],
      "name": "getMessageByIndex",
      "outputs": [
        {
          "internalType": "address",
          "name": "_from",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "_text",
          "type": "string"
        },
        {
          "internalType": "uint256",
          "name": "_time",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_who",
          "type": "address"
        }
      ],
      "name": "getPublicKey",
      "outputs": [
        {
          "internalType": "string",
          "name": "_key",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "_key_type",
          "type": "string"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "keys",
      "outputs": [
        {
          "internalType": "string",
          "name": "key",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "key_type",
          "type": "string"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_who",
          "type": "address"
        }
      ],
      "name": "lastIndex",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "_index",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "last_msg_index",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "messages",
      "outputs": [
        {
          "internalType": "address",
          "name": "from",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "text",
          "type": "string"
        },
        {
          "internalType": "uint256",
          "name": "time",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_to",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "_text",
          "type": "string"
        }
      ],
      "name": "sendMessage",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "_key",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "_key_type",
          "type": "string"
        }
      ],
      "name": "setPublicKey",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "608060405234801561001057600080fd5b50610e63806100206000396000f3fe608060405234801561001057600080fd5b50600436106100bb576000357c010000000000000000000000000000000000000000000000000000000090048063857cdbb811610083578063857cdbb81461015e578063c45d9bea14610171578063de6f24bb14610184578063e0c01bfe14610197578063edc8f0d8146101aa57600080fd5b8063070e3a71146100c05780631b6e23ea146100d557806342ac87cf146101085780634e6bd1c01461011b578063670d14b21461013d575b600080fd5b6100d36100ce366004610afd565b6101d3565b005b6100f56100e3366004610b27565b60006020819052908152604090205481565b6040519081526020015b60405180910390f35b6100d3610116366004610c05565b610337565b61012e610129366004610afd565b6103c6565b6040516100ff93929190610cb6565b61015061014b366004610b27565b61049b565b6040516100ff929190610ce8565b61015061016c366004610b27565b6105c7565b61012e61017f366004610afd565b61070b565b6100d3610192366004610d16565b6107c9565b61012e6101a5366004610b27565b6108c9565b6100f56101b8366004610b27565b600160a060020a031660009081526020819052604090205490565b600160a060020a03808316600090815260016020908152604080832085845290915290208054909116331461028e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602d60248201527f6d73672e73656e646572206d757374206265207468652073656e646572206f6660448201527f20746865206d6573736167652e00000000000000000000000000000000000000606482015260840160405180910390fd5b600160a060020a0383166000908152600160208181526040808420868552808352818520805473ffffffffffffffffffffffffffffffffffffffff19163317815582518085019384905286815295889052925292516102f1939190920191610a48565b50604051828152600160a060020a0384169033907f68290397e9c550791c692a43bd678e06c59bc776f6f670778d58dd4d8903f5de9060200160405180910390a3505050565b336000908152600260209081526040909120835161035792850190610a48565b50336000908152600260209081526040909120825161037e92600190920191840190610a48565b5033600160a060020a03167fe963a0dc3358a0b8e4c9c301f3003bfbd501c8b1ca3497838a39b6e7208d4e3283836040516103ba929190610ce8565b60405180910390a25050565b600160a060020a038281166000908152600160208181526040808420868552909152822080546002820154919092018054939460609486949091169290829061040e90610d5a565b80601f016020809104026020016040519081016040528092919081815260200182805461043a90610d5a565b80156104875780601f1061045c57610100808354040283529160200191610487565b820191906000526020600020905b81548152906001019060200180831161046a57829003601f168201915b505050505091509250925092509250925092565b6002602052600090815260409020805481906104b690610d5a565b80601f01602080910402602001604051908101604052809291908181526020018280546104e290610d5a565b801561052f5780601f106105045761010080835404028352916020019161052f565b820191906000526020600020905b81548152906001019060200180831161051257829003601f168201915b50505050509080600101805461054490610d5a565b80601f016020809104026020016040519081016040528092919081815260200182805461057090610d5a565b80156105bd5780601f10610592576101008083540402835291602001916105bd565b820191906000526020600020905b8154815290600101906020018083116105a057829003601f168201915b5050505050905082565b600160a060020a038116600090815260026020526040902080546060918291600182019082906105f690610d5a565b80601f016020809104026020016040519081016040528092919081815260200182805461062290610d5a565b801561066f5780601f106106445761010080835404028352916020019161066f565b820191906000526020600020905b81548152906001019060200180831161065257829003601f168201915b5050505050915080805461068290610d5a565b80601f01602080910402602001604051908101604052809291908181526020018280546106ae90610d5a565b80156106fb5780601f106106d0576101008083540402835291602001916106fb565b820191906000526020600020905b8154815290600101906020018083116106de57829003601f168201915b5050505050905091509150915091565b6001602081815260009384526040808520909152918352912080549181018054600160a060020a039093169261074090610d5a565b80601f016020809104026020016040519081016040528092919081815260200182805461076c90610d5a565b80156107b95780601f1061078e576101008083540402835291602001916107b9565b820191906000526020600020905b81548152906001019060200180831161079c57829003601f168201915b5050505050908060020154905083565b600160a060020a038216600090815260016020818152604080842084835281852080548652818452828620805473ffffffffffffffffffffffffffffffffffffffff1916331790555485528252909220835161082d93919092019190840190610a48565b50600160a060020a038216600081815260016020908152604080832083835281842080548552908352908320426002909101559282528190528154919061087383610ddc565b919050555081600160a060020a031633600160a060020a03167fdd99aef5e4fdfad84059320be40f5dc0f015dc4025f56bd4010608c6743bc22e42846040516108bd929190610df5565b60405180910390a35050565b600160a060020a03811660009081526020819052604081205460609082906108f057600080fd5b600160a060020a03841660009081526001602081815260408084209184905283205490929161091e91610e16565b81526020808201929092526040908101600090812054600160a060020a038881168352600180865284842095849052938320549116939261095e91610e16565b815260208082019290925260409081016000908120600160a060020a038916825260018085528383209483905292822054908301939261099d91610e16565b8152602001908152602001600020600201548180546109bb90610d5a565b80601f01602080910402602001604051908101604052809291908181526020018280546109e790610d5a565b8015610a345780601f10610a0957610100808354040283529160200191610a34565b820191906000526020600020905b815481529060010190602001808311610a1757829003601f168201915b505050505091509250925092509193909250565b828054610a5490610d5a565b90600052602060002090601f016020900481019282610a765760008555610abc565b82601f10610a8f57805160ff1916838001178555610abc565b82800160010185558215610abc579182015b82811115610abc578251825591602001919060010190610aa1565b50610ac8929150610acc565b5090565b5b80821115610ac85760008155600101610acd565b8035600160a060020a0381168114610af857600080fd5b919050565b60008060408385031215610b1057600080fd5b610b1983610ae1565b946020939093013593505050565b600060208284031215610b3957600080fd5b610b4282610ae1565b9392505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600082601f830112610b8957600080fd5b813567ffffffffffffffff80821115610ba457610ba4610b49565b604051601f8301601f19908116603f01168101908282118183101715610bcc57610bcc610b49565b81604052838152866020858801011115610be557600080fd5b836020870160208301376000602085830101528094505050505092915050565b60008060408385031215610c1857600080fd5b823567ffffffffffffffff80821115610c3057600080fd5b610c3c86838701610b78565b93506020850135915080821115610c5257600080fd5b50610c5f85828601610b78565b9150509250929050565b6000815180845260005b81811015610c8f57602081850181015186830182015201610c73565b81811115610ca1576000602083870101525b50601f01601f19169290920160200192915050565b600160a060020a0384168152606060208201526000610cd86060830185610c69565b9050826040830152949350505050565b604081526000610cfb6040830185610c69565b8281036020840152610d0d8185610c69565b95945050505050565b60008060408385031215610d2957600080fd5b610d3283610ae1565b9150602083013567ffffffffffffffff811115610d4e57600080fd5b610c5f85828601610b78565b600281046001821680610d6e57607f821691505b602082108103610da7577f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600060018201610dee57610dee610dad565b5060010190565b828152604060208201526000610e0e6040830184610c69565b949350505050565b600082821015610e2857610e28610dad565b50039056fea2646970667358221220d5794af01e5835679af47bc8579cbe0c606e23a2772208d8d587ea370f0e283e64736f6c634300080d0033",
  "deployedBytecode": "608060405234801561001057600080fd5b50600436106100bb576000357c010000000000000000000000000000000000000000000000000000000090048063857cdbb811610083578063857cdbb81461015e578063c45d9bea14610171578063de6f24bb14610184578063e0c01bfe14610197578063edc8f0d8146101aa57600080fd5b8063070e3a71146100c05780631b6e23ea146100d557806342ac87cf146101085780634e6bd1c01461011b578063670d14b21461013d575b600080fd5b6100d36100ce366004610afd565b6101d3565b005b6100f56100e3366004610b27565b60006020819052908152604090205481565b6040519081526020015b60405180910390f35b6100d3610116366004610c05565b610337565b61012e610129366004610afd565b6103c6565b6040516100ff93929190610cb6565b61015061014b366004610b27565b61049b565b6040516100ff929190610ce8565b61015061016c366004610b27565b6105c7565b61012e61017f366004610afd565b61070b565b6100d3610192366004610d16565b6107c9565b61012e6101a5366004610b27565b6108c9565b6100f56101b8366004610b27565b600160a060020a031660009081526020819052604090205490565b600160a060020a03808316600090815260016020908152604080832085845290915290208054909116331461028e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602d60248201527f6d73672e73656e646572206d757374206265207468652073656e646572206f6660448201527f20746865206d6573736167652e00000000000000000000000000000000000000606482015260840160405180910390fd5b600160a060020a0383166000908152600160208181526040808420868552808352818520805473ffffffffffffffffffffffffffffffffffffffff19163317815582518085019384905286815295889052925292516102f1939190920191610a48565b50604051828152600160a060020a0384169033907f68290397e9c550791c692a43bd678e06c59bc776f6f670778d58dd4d8903f5de9060200160405180910390a3505050565b336000908152600260209081526040909120835161035792850190610a48565b50336000908152600260209081526040909120825161037e92600190920191840190610a48565b5033600160a060020a03167fe963a0dc3358a0b8e4c9c301f3003bfbd501c8b1ca3497838a39b6e7208d4e3283836040516103ba929190610ce8565b60405180910390a25050565b600160a060020a038281166000908152600160208181526040808420868552909152822080546002820154919092018054939460609486949091169290829061040e90610d5a565b80601f016020809104026020016040519081016040528092919081815260200182805461043a90610d5a565b80156104875780601f1061045c57610100808354040283529160200191610487565b820191906000526020600020905b81548152906001019060200180831161046a57829003601f168201915b505050505091509250925092509250925092565b6002602052600090815260409020805481906104b690610d5a565b80601f01602080910402602001604051908101604052809291908181526020018280546104e290610d5a565b801561052f5780601f106105045761010080835404028352916020019161052f565b820191906000526020600020905b81548152906001019060200180831161051257829003601f168201915b50505050509080600101805461054490610d5a565b80601f016020809104026020016040519081016040528092919081815260200182805461057090610d5a565b80156105bd5780601f10610592576101008083540402835291602001916105bd565b820191906000526020600020905b8154815290600101906020018083116105a057829003601f168201915b5050505050905082565b600160a060020a038116600090815260026020526040902080546060918291600182019082906105f690610d5a565b80601f016020809104026020016040519081016040528092919081815260200182805461062290610d5a565b801561066f5780601f106106445761010080835404028352916020019161066f565b820191906000526020600020905b81548152906001019060200180831161065257829003601f168201915b5050505050915080805461068290610d5a565b80601f01602080910402602001604051908101604052809291908181526020018280546106ae90610d5a565b80156106fb5780601f106106d0576101008083540402835291602001916106fb565b820191906000526020600020905b8154815290600101906020018083116106de57829003601f168201915b5050505050905091509150915091565b6001602081815260009384526040808520909152918352912080549181018054600160a060020a039093169261074090610d5a565b80601f016020809104026020016040519081016040528092919081815260200182805461076c90610d5a565b80156107b95780601f1061078e576101008083540402835291602001916107b9565b820191906000526020600020905b81548152906001019060200180831161079c57829003601f168201915b5050505050908060020154905083565b600160a060020a038216600090815260016020818152604080842084835281852080548652818452828620805473ffffffffffffffffffffffffffffffffffffffff1916331790555485528252909220835161082d93919092019190840190610a48565b50600160a060020a038216600081815260016020908152604080832083835281842080548552908352908320426002909101559282528190528154919061087383610ddc565b919050555081600160a060020a031633600160a060020a03167fdd99aef5e4fdfad84059320be40f5dc0f015dc4025f56bd4010608c6743bc22e42846040516108bd929190610df5565b60405180910390a35050565b600160a060020a03811660009081526020819052604081205460609082906108f057600080fd5b600160a060020a03841660009081526001602081815260408084209184905283205490929161091e91610e16565b81526020808201929092526040908101600090812054600160a060020a038881168352600180865284842095849052938320549116939261095e91610e16565b815260208082019290925260409081016000908120600160a060020a038916825260018085528383209483905292822054908301939261099d91610e16565b8152602001908152602001600020600201548180546109bb90610d5a565b80601f01602080910402602001604051908101604052809291908181526020018280546109e790610d5a565b8015610a345780601f10610a0957610100808354040283529160200191610a34565b820191906000526020600020905b815481529060010190602001808311610a1757829003601f168201915b505050505091509250925092509193909250565b828054610a5490610d5a565b90600052602060002090601f016020900481019282610a765760008555610abc565b82601f10610a8f57805160ff1916838001178555610abc565b82800160010185558215610abc579182015b82811115610abc578251825591602001919060010190610aa1565b50610ac8929150610acc565b5090565b5b80821115610ac85760008155600101610acd565b8035600160a060020a0381168114610af857600080fd5b919050565b60008060408385031215610b1057600080fd5b610b1983610ae1565b946020939093013593505050565b600060208284031215610b3957600080fd5b610b4282610ae1565b9392505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600082601f830112610b8957600080fd5b813567ffffffffffffffff80821115610ba457610ba4610b49565b604051601f8301601f19908116603f01168101908282118183101715610bcc57610bcc610b49565b81604052838152866020858801011115610be557600080fd5b836020870160208301376000602085830101528094505050505092915050565b60008060408385031215610c1857600080fd5b823567ffffffffffffffff80821115610c3057600080fd5b610c3c86838701610b78565b93506020850135915080821115610c5257600080fd5b50610c5f85828601610b78565b9150509250929050565b6000815180845260005b81811015610c8f57602081850181015186830182015201610c73565b81811115610ca1576000602083870101525b50601f01601f19169290920160200192915050565b600160a060020a0384168152606060208201526000610cd86060830185610c69565b9050826040830152949350505050565b604081526000610cfb6040830185610c69565b8281036020840152610d0d8185610c69565b95945050505050565b60008060408385031215610d2957600080fd5b610d3283610ae1565b9150602083013567ffffffffffffffff811115610d4e57600080fd5b610c5f85828601610b78565b600281046001821680610d6e57607f821691505b602082108103610da7577f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600060018201610dee57610dee610dad565b5060010190565b828152604060208201526000610e0e6040830184610c69565b949350505050565b600082821015610e2857610e28610dad565b50039056fea2646970667358221220d5794af01e5835679af47bc8579cbe0c606e23a2772208d8d587ea370f0e283e64736f6c634300080d0033"
}