{
  "abi": [
    {
      "inputs": [],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "sender",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "receiver",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "time",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "text",
          "type": "string"
        }
      ],
      "name": "Message",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "who",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "key",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "key_type",
          "type": "string"
        }
      ],
      "name": "PublicKeyUpdated",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_who",
          "type": "address"
        }
      ],
      "name": "getLastMessage",
      "outputs": [
        {
          "internalType": "address",
          "name": "_from",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "_text",
          "type": "string"
        },
        {
          "internalType": "uint256",
          "name": "_time",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_who",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_index",
          "type": "uint256"
        }
      ],
      "name": "getMessageByIndex",
      "outputs": [
        {
          "internalType": "address",
          "name": "_from",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "_text",
          "type": "string"
        },
        {
          "internalType": "uint256",
          "name": "_time",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_who",
          "type": "address"
        }
      ],
      "name": "getPublicKey",
      "outputs": [
        {
          "internalType": "string",
          "name": "_key",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "_key_type",
          "type": "string"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "keys",
      "outputs": [
        {
          "internalType": "string",
          "name": "key",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "key_type",
          "type": "string"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_who",
          "type": "address"
        }
      ],
      "name": "lastIndex",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "_index",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "last_msg_index",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "messages",
      "outputs": [
        {
          "internalType": "address",
          "name": "from",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "text",
          "type": "string"
        },
        {
          "internalType": "uint256",
          "name": "time",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_to",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "_text",
          "type": "string"
        }
      ],
      "name": "sendMessage",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "_key",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "_key_type",
          "type": "string"
        }
      ],
      "name": "setPublicKey",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "608060405234801561001057600080fd5b50610ce4806100206000396000f3fe608060405234801561001057600080fd5b50600436106100b0576000357c010000000000000000000000000000000000000000000000000000000090048063857cdbb811610083578063857cdbb814610140578063c45d9bea14610153578063de6f24bb14610166578063e0c01bfe14610179578063edc8f0d81461018c57600080fd5b80631b6e23ea146100b557806342ac87cf146100e85780634e6bd1c0146100fd578063670d14b21461011f575b600080fd5b6100d56100c3366004610a08565b60006020819052908152604090205481565b6040519081526020015b60405180910390f35b6100fb6100f6366004610aa2565b6101b5565b005b61011061010b366004610a78565b610244565b6040516100df93929190610b49565b61013261012d366004610a08565b610319565b6040516100df929190610b7b565b61013261014e366004610a08565b610445565b610110610161366004610a78565b610589565b6100fb610174366004610a2a565b610647565b610110610187366004610a08565b610747565b6100d561019a366004610a08565b600160a060020a031660009081526020819052604090205490565b33600090815260026020908152604090912083516101d5928501906108c6565b5033600090815260026020908152604090912082516101fc926001909201918401906108c6565b5033600160a060020a03167fe963a0dc3358a0b8e4c9c301f3003bfbd501c8b1ca3497838a39b6e7208d4e328383604051610238929190610b7b565b60405180910390a25050565b600160a060020a038281166000908152600160208181526040808420868552909152822080546002820154919092018054939460609486949091169290829061028c90610be1565b80601f01602080910402602001604051908101604052809291908181526020018280546102b890610be1565b80156103055780601f106102da57610100808354040283529160200191610305565b820191906000526020600020905b8154815290600101906020018083116102e857829003601f168201915b505050505091509250925092509250925092565b60026020526000908152604090208054819061033490610be1565b80601f016020809104026020016040519081016040528092919081815260200182805461036090610be1565b80156103ad5780601f10610382576101008083540402835291602001916103ad565b820191906000526020600020905b81548152906001019060200180831161039057829003601f168201915b5050505050908060010180546103c290610be1565b80601f01602080910402602001604051908101604052809291908181526020018280546103ee90610be1565b801561043b5780601f106104105761010080835404028352916020019161043b565b820191906000526020600020905b81548152906001019060200180831161041e57829003601f168201915b5050505050905082565b600160a060020a0381166000908152600260205260409020805460609182916001820190829061047490610be1565b80601f01602080910402602001604051908101604052809291908181526020018280546104a090610be1565b80156104ed5780601f106104c2576101008083540402835291602001916104ed565b820191906000526020600020905b8154815290600101906020018083116104d057829003601f168201915b5050505050915080805461050090610be1565b80601f016020809104026020016040519081016040528092919081815260200182805461052c90610be1565b80156105795780601f1061054e57610100808354040283529160200191610579565b820191906000526020600020905b81548152906001019060200180831161055c57829003601f168201915b5050505050905091509150915091565b6001602081815260009384526040808520909152918352912080549181018054600160a060020a03909316926105be90610be1565b80601f01602080910402602001604051908101604052809291908181526020018280546105ea90610be1565b80156106375780601f1061060c57610100808354040283529160200191610637565b820191906000526020600020905b81548152906001019060200180831161061a57829003601f168201915b5050505050908060020154905083565b600160a060020a038216600090815260016020818152604080842084835281852080548652818452828620805473ffffffffffffffffffffffffffffffffffffffff191633179055548552825290922083516106ab939190920191908401906108c6565b50600160a060020a03821660008181526001602090815260408083208383528184208054855290835290832042600290910155928252819052815491906106f183610c35565b919050555081600160a060020a031633600160a060020a03167fdd99aef5e4fdfad84059320be40f5dc0f015dc4025f56bd4010608c6743bc22e428460405161073b929190610ba9565b60405180910390a35050565b600160a060020a038116600090815260208190526040812054606090829061076e57600080fd5b600160a060020a03841660009081526001602081815260408084209184905283205490929161079c91610bca565b81526020808201929092526040908101600090812054600160a060020a03888116835260018086528484209584905293832054911693926107dc91610bca565b815260208082019290925260409081016000908120600160a060020a038916825260018085528383209483905292822054908301939261081b91610bca565b81526020019081526020016000206002015481805461083990610be1565b80601f016020809104026020016040519081016040528092919081815260200182805461086590610be1565b80156108b25780601f10610887576101008083540402835291602001916108b2565b820191906000526020600020905b81548152906001019060200180831161089557829003601f168201915b505050505091509250925092509193909250565b8280546108d290610be1565b90600052602060002090601f0160209004810192826108f4576000855561093a565b82601f1061090d57805160ff191683800117855561093a565b8280016001018555821561093a579182015b8281111561093a57825182559160200191906001019061091f565b5061094692915061094a565b5090565b5b80821115610946576000815560010161094b565b8035600160a060020a038116811461097657600080fd5b919050565b600082601f83011261098c57600080fd5b813567ffffffffffffffff808211156109a7576109a7610c7f565b604051601f8301601f19908116603f011681019082821181831017156109cf576109cf610c7f565b816040528381528660208588010111156109e857600080fd5b836020870160208301376000602085830101528094505050505092915050565b600060208284031215610a1a57600080fd5b610a238261095f565b9392505050565b60008060408385031215610a3d57600080fd5b610a468361095f565b9150602083013567ffffffffffffffff811115610a6257600080fd5b610a6e8582860161097b565b9150509250929050565b60008060408385031215610a8b57600080fd5b610a948361095f565b946020939093013593505050565b60008060408385031215610ab557600080fd5b823567ffffffffffffffff80821115610acd57600080fd5b610ad98683870161097b565b93506020850135915080821115610aef57600080fd5b50610a6e8582860161097b565b6000815180845260005b81811015610b2257602081850181015186830182015201610b06565b81811115610b34576000602083870101525b50601f01601f19169290920160200192915050565b600160a060020a0384168152606060208201526000610b6b6060830185610afc565b9050826040830152949350505050565b604081526000610b8e6040830185610afc565b8281036020840152610ba08185610afc565b95945050505050565b828152604060208201526000610bc26040830184610afc565b949350505050565b600082821015610bdc57610bdc610c50565b500390565b600281046001821680610bf557607f821691505b60208210811415610c2f577f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b50919050565b6000600019821415610c4957610c49610c50565b5060010190565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fdfea264697066735822122093840254e6481554e9a6f4d210c35444d8c0f52870609a386366593c0cb518cf64736f6c63430008050033",
  "deployedBytecode": "608060405234801561001057600080fd5b50600436106100b0576000357c010000000000000000000000000000000000000000000000000000000090048063857cdbb811610083578063857cdbb814610140578063c45d9bea14610153578063de6f24bb14610166578063e0c01bfe14610179578063edc8f0d81461018c57600080fd5b80631b6e23ea146100b557806342ac87cf146100e85780634e6bd1c0146100fd578063670d14b21461011f575b600080fd5b6100d56100c3366004610a08565b60006020819052908152604090205481565b6040519081526020015b60405180910390f35b6100fb6100f6366004610aa2565b6101b5565b005b61011061010b366004610a78565b610244565b6040516100df93929190610b49565b61013261012d366004610a08565b610319565b6040516100df929190610b7b565b61013261014e366004610a08565b610445565b610110610161366004610a78565b610589565b6100fb610174366004610a2a565b610647565b610110610187366004610a08565b610747565b6100d561019a366004610a08565b600160a060020a031660009081526020819052604090205490565b33600090815260026020908152604090912083516101d5928501906108c6565b5033600090815260026020908152604090912082516101fc926001909201918401906108c6565b5033600160a060020a03167fe963a0dc3358a0b8e4c9c301f3003bfbd501c8b1ca3497838a39b6e7208d4e328383604051610238929190610b7b565b60405180910390a25050565b600160a060020a038281166000908152600160208181526040808420868552909152822080546002820154919092018054939460609486949091169290829061028c90610be1565b80601f01602080910402602001604051908101604052809291908181526020018280546102b890610be1565b80156103055780601f106102da57610100808354040283529160200191610305565b820191906000526020600020905b8154815290600101906020018083116102e857829003601f168201915b505050505091509250925092509250925092565b60026020526000908152604090208054819061033490610be1565b80601f016020809104026020016040519081016040528092919081815260200182805461036090610be1565b80156103ad5780601f10610382576101008083540402835291602001916103ad565b820191906000526020600020905b81548152906001019060200180831161039057829003601f168201915b5050505050908060010180546103c290610be1565b80601f01602080910402602001604051908101604052809291908181526020018280546103ee90610be1565b801561043b5780601f106104105761010080835404028352916020019161043b565b820191906000526020600020905b81548152906001019060200180831161041e57829003601f168201915b5050505050905082565b600160a060020a0381166000908152600260205260409020805460609182916001820190829061047490610be1565b80601f01602080910402602001604051908101604052809291908181526020018280546104a090610be1565b80156104ed5780601f106104c2576101008083540402835291602001916104ed565b820191906000526020600020905b8154815290600101906020018083116104d057829003601f168201915b5050505050915080805461050090610be1565b80601f016020809104026020016040519081016040528092919081815260200182805461052c90610be1565b80156105795780601f1061054e57610100808354040283529160200191610579565b820191906000526020600020905b81548152906001019060200180831161055c57829003601f168201915b5050505050905091509150915091565b6001602081815260009384526040808520909152918352912080549181018054600160a060020a03909316926105be90610be1565b80601f01602080910402602001604051908101604052809291908181526020018280546105ea90610be1565b80156106375780601f1061060c57610100808354040283529160200191610637565b820191906000526020600020905b81548152906001019060200180831161061a57829003601f168201915b5050505050908060020154905083565b600160a060020a038216600090815260016020818152604080842084835281852080548652818452828620805473ffffffffffffffffffffffffffffffffffffffff191633179055548552825290922083516106ab939190920191908401906108c6565b50600160a060020a03821660008181526001602090815260408083208383528184208054855290835290832042600290910155928252819052815491906106f183610c35565b919050555081600160a060020a031633600160a060020a03167fdd99aef5e4fdfad84059320be40f5dc0f015dc4025f56bd4010608c6743bc22e428460405161073b929190610ba9565b60405180910390a35050565b600160a060020a038116600090815260208190526040812054606090829061076e57600080fd5b600160a060020a03841660009081526001602081815260408084209184905283205490929161079c91610bca565b81526020808201929092526040908101600090812054600160a060020a03888116835260018086528484209584905293832054911693926107dc91610bca565b815260208082019290925260409081016000908120600160a060020a038916825260018085528383209483905292822054908301939261081b91610bca565b81526020019081526020016000206002015481805461083990610be1565b80601f016020809104026020016040519081016040528092919081815260200182805461086590610be1565b80156108b25780601f10610887576101008083540402835291602001916108b2565b820191906000526020600020905b81548152906001019060200180831161089557829003601f168201915b505050505091509250925092509193909250565b8280546108d290610be1565b90600052602060002090601f0160209004810192826108f4576000855561093a565b82601f1061090d57805160ff191683800117855561093a565b8280016001018555821561093a579182015b8281111561093a57825182559160200191906001019061091f565b5061094692915061094a565b5090565b5b80821115610946576000815560010161094b565b8035600160a060020a038116811461097657600080fd5b919050565b600082601f83011261098c57600080fd5b813567ffffffffffffffff808211156109a7576109a7610c7f565b604051601f8301601f19908116603f011681019082821181831017156109cf576109cf610c7f565b816040528381528660208588010111156109e857600080fd5b836020870160208301376000602085830101528094505050505092915050565b600060208284031215610a1a57600080fd5b610a238261095f565b9392505050565b60008060408385031215610a3d57600080fd5b610a468361095f565b9150602083013567ffffffffffffffff811115610a6257600080fd5b610a6e8582860161097b565b9150509250929050565b60008060408385031215610a8b57600080fd5b610a948361095f565b946020939093013593505050565b60008060408385031215610ab557600080fd5b823567ffffffffffffffff80821115610acd57600080fd5b610ad98683870161097b565b93506020850135915080821115610aef57600080fd5b50610a6e8582860161097b565b6000815180845260005b81811015610b2257602081850181015186830182015201610b06565b81811115610b34576000602083870101525b50601f01601f19169290920160200192915050565b600160a060020a0384168152606060208201526000610b6b6060830185610afc565b9050826040830152949350505050565b604081526000610b8e6040830185610afc565b8281036020840152610ba08185610afc565b95945050505050565b828152604060208201526000610bc26040830184610afc565b949350505050565b600082821015610bdc57610bdc610c50565b500390565b600281046001821680610bf557607f821691505b60208210811415610c2f577f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b50919050565b6000600019821415610c4957610c49610c50565b5060010190565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fdfea264697066735822122093840254e6481554e9a6f4d210c35444d8c0f52870609a386366593c0cb518cf64736f6c63430008050033"
}