{
  "abi": [
    {
      "inputs": [],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "sender",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "receiver",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "time",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "text",
          "type": "string"
        }
      ],
      "name": "Message",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "sender",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "receiver",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "index",
          "type": "uint256"
        }
      ],
      "name": "MessageCleared",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "who",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "key",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "key_type",
          "type": "string"
        }
      ],
      "name": "PublicKeyUpdated",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_to",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_index",
          "type": "uint256"
        }
      ],
      "name": "clearMessage",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_who",
          "type": "address"
        }
      ],
      "name": "getLastMessage",
      "outputs": [
        {
          "internalType": "address",
          "name": "_from",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "_text",
          "type": "string"
        },
        {
          "internalType": "uint256",
          "name": "_time",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_who",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_index",
          "type": "uint256"
        }
      ],
      "name": "getMessageByIndex",
      "outputs": [
        {
          "internalType": "address",
          "name": "_from",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "_text",
          "type": "string"
        },
        {
          "internalType": "uint256",
          "name": "_time",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_who",
          "type": "address"
        }
      ],
      "name": "getPublicKey",
      "outputs": [
        {
          "internalType": "string",
          "name": "_key",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "_key_type",
          "type": "string"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "keys",
      "outputs": [
        {
          "internalType": "string",
          "name": "key",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "key_type",
          "type": "string"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_who",
          "type": "address"
        }
      ],
      "name": "lastIndex",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "_index",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "last_msg_index",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "messages",
      "outputs": [
        {
          "internalType": "address",
          "name": "from",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "text",
          "type": "string"
        },
        {
          "internalType": "uint256",
          "name": "time",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_to",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "_text",
          "type": "string"
        }
      ],
      "name": "sendMessage",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "_key",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "_key_type",
          "type": "string"
        }
      ],
      "name": "setPublicKey",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "608060405234801561001057600080fd5b50610f28806100206000396000f3fe608060405234801561001057600080fd5b50600436106100bb576000357c010000000000000000000000000000000000000000000000000000000090048063857cdbb811610083578063857cdbb81461015e578063c45d9bea14610171578063de6f24bb14610184578063e0c01bfe14610197578063edc8f0d8146101aa57600080fd5b8063070e3a71146100c05780631b6e23ea146100d557806342ac87cf146101085780634e6bd1c01461011b578063670d14b21461013d575b600080fd5b6100d36100ce366004610a9f565b6101d3565b005b6100f56100e3366004610ac9565b60006020819052908152604090205481565b6040519081526020015b60405180910390f35b6100d3610116366004610ba7565b610319565b61012e610129366004610a9f565b610397565b6040516100ff93929190610c51565b61015061014b366004610ac9565b61046c565b6040516100ff929190610c83565b61015061016c366004610ac9565b610598565b61012e61017f366004610a9f565b6106dc565b6100d3610192366004610cb1565b61079a565b61012e6101a5366004610ac9565b61088f565b6100f56101b8366004610ac9565b600160a060020a031660009081526020819052604090205490565b600160a060020a03808316600090815260016020908152604080832085845282529182902080548351808501909452600684527f36313031303100000000000000000000000000000000000000000000000000009284019290925292163314610272576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102699190610cf5565b60405180910390fd5b50600160a060020a0383166000908152600160208181526040808420868552808352818520805473ffffffffffffffffffffffffffffffffffffffff1916331781558251808501909352858352948790529091529101906102d39082610daa565b50604051828152600160a060020a0384169033907f68290397e9c550791c692a43bd678e06c59bc776f6f670778d58dd4d8903f5de9060200160405180910390a3505050565b3360009081526002602052604090206103328382610daa565b5033600090815260026020526040902060010161034f8282610daa565b5033600160a060020a03167fe963a0dc3358a0b8e4c9c301f3003bfbd501c8b1ca3497838a39b6e7208d4e32838360405161038b929190610c83565b60405180910390a25050565b600160a060020a03828116600090815260016020818152604080842086855290915282208054600282015491909201805493946060948694909116929082906103df90610d08565b80601f016020809104026020016040519081016040528092919081815260200182805461040b90610d08565b80156104585780601f1061042d57610100808354040283529160200191610458565b820191906000526020600020905b81548152906001019060200180831161043b57829003601f168201915b505050505091509250925092509250925092565b60026020526000908152604090208054819061048790610d08565b80601f01602080910402602001604051908101604052809291908181526020018280546104b390610d08565b80156105005780601f106104d557610100808354040283529160200191610500565b820191906000526020600020905b8154815290600101906020018083116104e357829003601f168201915b50505050509080600101805461051590610d08565b80601f016020809104026020016040519081016040528092919081815260200182805461054190610d08565b801561058e5780601f106105635761010080835404028352916020019161058e565b820191906000526020600020905b81548152906001019060200180831161057157829003601f168201915b5050505050905082565b600160a060020a038116600090815260026020526040902080546060918291600182019082906105c790610d08565b80601f01602080910402602001604051908101604052809291908181526020018280546105f390610d08565b80156106405780601f1061061557610100808354040283529160200191610640565b820191906000526020600020905b81548152906001019060200180831161062357829003601f168201915b5050505050915080805461065390610d08565b80601f016020809104026020016040519081016040528092919081815260200182805461067f90610d08565b80156106cc5780601f106106a1576101008083540402835291602001916106cc565b820191906000526020600020905b8154815290600101906020018083116106af57829003601f168201915b5050505050905091509150915091565b6001602081815260009384526040808520909152918352912080549181018054600160a060020a039093169261071190610d08565b80601f016020809104026020016040519081016040528092919081815260200182805461073d90610d08565b801561078a5780601f1061075f5761010080835404028352916020019161078a565b820191906000526020600020905b81548152906001019060200180831161076d57829003601f168201915b5050505050908060020154905083565b600160a060020a0382166000908152600160208181526040808420848352818520805486529252808420805473ffffffffffffffffffffffffffffffffffffffff19163317905590548352909120016107f38282610daa565b50600160a060020a038216600081815260016020908152604080832083835281842080548552908352908320426002909101559282528190528154919061083983610e9f565b919050555081600160a060020a031633600160a060020a03167fdd99aef5e4fdfad84059320be40f5dc0f015dc4025f56bd4010608c6743bc22e4284604051610883929190610eb8565b60405180910390a35050565b6000606060008060008086600160a060020a0316600160a060020a0316815260200190815260200160002054116040518060400160405280600681526020017f36313030303100000000000000000000000000000000000000000000000000008152509061092a576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102699190610cf5565b50600160a060020a03841660009081526001602081815260408084209184905283205490929161095991610ed9565b81526020808201929092526040908101600090812054600160a060020a038881168352600180865284842095849052938320549116939261099991610ed9565b815260208082019290925260409081016000908120600160a060020a03891682526001808552838320948390529282205490830193926109d891610ed9565b8152602001908152602001600020600201548180546109f690610d08565b80601f0160208091040260200160405190810160405280929190818152602001828054610a2290610d08565b8015610a6f5780601f10610a4457610100808354040283529160200191610a6f565b820191906000526020600020905b815481529060010190602001808311610a5257829003601f168201915b505050505091509250925092509193909250565b8035600160a060020a0381168114610a9a57600080fd5b919050565b60008060408385031215610ab257600080fd5b610abb83610a83565b946020939093013593505050565b600060208284031215610adb57600080fd5b610ae482610a83565b9392505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600082601f830112610b2b57600080fd5b813567ffffffffffffffff80821115610b4657610b46610aeb565b604051601f8301601f19908116603f01168101908282118183101715610b6e57610b6e610aeb565b81604052838152866020858801011115610b8757600080fd5b836020870160208301376000602085830101528094505050505092915050565b60008060408385031215610bba57600080fd5b823567ffffffffffffffff80821115610bd257600080fd5b610bde86838701610b1a565b93506020850135915080821115610bf457600080fd5b50610c0185828601610b1a565b9150509250929050565b6000815180845260005b81811015610c3157602081850181015186830182015201610c15565b506000602082860101526020601f19601f83011685010191505092915050565b600160a060020a0384168152606060208201526000610c736060830185610c0b565b9050826040830152949350505050565b604081526000610c966040830185610c0b565b8281036020840152610ca88185610c0b565b95945050505050565b60008060408385031215610cc457600080fd5b610ccd83610a83565b9150602083013567ffffffffffffffff811115610ce957600080fd5b610c0185828601610b1a565b602081526000610ae46020830184610c0b565b600281046001821680610d1c57607f821691505b602082108103610d55577f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b50919050565b601f821115610da5576000818152602081206020601f86010481016020861015610d825750805b6020601f860104820191505b81811015610da157828155600101610d8e565b5050505b505050565b815167ffffffffffffffff811115610dc457610dc4610aeb565b610dd881610dd28454610d08565b84610d5b565b602080601f831160018114610e115760008415610df55750858301515b60028086026008870290910a6000190419821617865550610da1565b600085815260208120601f198616915b82811015610e4057888601518255948401946001909101908401610e21565b5085821015610e6057878501516008601f88160260020a60001904191681555b5050505050600202600101905550565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600060018201610eb157610eb1610e70565b5060010190565b828152604060208201526000610ed16040830184610c0b565b949350505050565b81810381811115610eec57610eec610e70565b9291505056fea264697066735822122082ef3d83e8101c88ac842e66aa0101c487e06f2da6c81327a8b9653b4d487a3864736f6c63430008110033",
  "deployedBytecode": "608060405234801561001057600080fd5b50600436106100bb576000357c010000000000000000000000000000000000000000000000000000000090048063857cdbb811610083578063857cdbb81461015e578063c45d9bea14610171578063de6f24bb14610184578063e0c01bfe14610197578063edc8f0d8146101aa57600080fd5b8063070e3a71146100c05780631b6e23ea146100d557806342ac87cf146101085780634e6bd1c01461011b578063670d14b21461013d575b600080fd5b6100d36100ce366004610a9f565b6101d3565b005b6100f56100e3366004610ac9565b60006020819052908152604090205481565b6040519081526020015b60405180910390f35b6100d3610116366004610ba7565b610319565b61012e610129366004610a9f565b610397565b6040516100ff93929190610c51565b61015061014b366004610ac9565b61046c565b6040516100ff929190610c83565b61015061016c366004610ac9565b610598565b61012e61017f366004610a9f565b6106dc565b6100d3610192366004610cb1565b61079a565b61012e6101a5366004610ac9565b61088f565b6100f56101b8366004610ac9565b600160a060020a031660009081526020819052604090205490565b600160a060020a03808316600090815260016020908152604080832085845282529182902080548351808501909452600684527f36313031303100000000000000000000000000000000000000000000000000009284019290925292163314610272576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102699190610cf5565b60405180910390fd5b50600160a060020a0383166000908152600160208181526040808420868552808352818520805473ffffffffffffffffffffffffffffffffffffffff1916331781558251808501909352858352948790529091529101906102d39082610daa565b50604051828152600160a060020a0384169033907f68290397e9c550791c692a43bd678e06c59bc776f6f670778d58dd4d8903f5de9060200160405180910390a3505050565b3360009081526002602052604090206103328382610daa565b5033600090815260026020526040902060010161034f8282610daa565b5033600160a060020a03167fe963a0dc3358a0b8e4c9c301f3003bfbd501c8b1ca3497838a39b6e7208d4e32838360405161038b929190610c83565b60405180910390a25050565b600160a060020a03828116600090815260016020818152604080842086855290915282208054600282015491909201805493946060948694909116929082906103df90610d08565b80601f016020809104026020016040519081016040528092919081815260200182805461040b90610d08565b80156104585780601f1061042d57610100808354040283529160200191610458565b820191906000526020600020905b81548152906001019060200180831161043b57829003601f168201915b505050505091509250925092509250925092565b60026020526000908152604090208054819061048790610d08565b80601f01602080910402602001604051908101604052809291908181526020018280546104b390610d08565b80156105005780601f106104d557610100808354040283529160200191610500565b820191906000526020600020905b8154815290600101906020018083116104e357829003601f168201915b50505050509080600101805461051590610d08565b80601f016020809104026020016040519081016040528092919081815260200182805461054190610d08565b801561058e5780601f106105635761010080835404028352916020019161058e565b820191906000526020600020905b81548152906001019060200180831161057157829003601f168201915b5050505050905082565b600160a060020a038116600090815260026020526040902080546060918291600182019082906105c790610d08565b80601f01602080910402602001604051908101604052809291908181526020018280546105f390610d08565b80156106405780601f1061061557610100808354040283529160200191610640565b820191906000526020600020905b81548152906001019060200180831161062357829003601f168201915b5050505050915080805461065390610d08565b80601f016020809104026020016040519081016040528092919081815260200182805461067f90610d08565b80156106cc5780601f106106a1576101008083540402835291602001916106cc565b820191906000526020600020905b8154815290600101906020018083116106af57829003601f168201915b5050505050905091509150915091565b6001602081815260009384526040808520909152918352912080549181018054600160a060020a039093169261071190610d08565b80601f016020809104026020016040519081016040528092919081815260200182805461073d90610d08565b801561078a5780601f1061075f5761010080835404028352916020019161078a565b820191906000526020600020905b81548152906001019060200180831161076d57829003601f168201915b5050505050908060020154905083565b600160a060020a0382166000908152600160208181526040808420848352818520805486529252808420805473ffffffffffffffffffffffffffffffffffffffff19163317905590548352909120016107f38282610daa565b50600160a060020a038216600081815260016020908152604080832083835281842080548552908352908320426002909101559282528190528154919061083983610e9f565b919050555081600160a060020a031633600160a060020a03167fdd99aef5e4fdfad84059320be40f5dc0f015dc4025f56bd4010608c6743bc22e4284604051610883929190610eb8565b60405180910390a35050565b6000606060008060008086600160a060020a0316600160a060020a0316815260200190815260200160002054116040518060400160405280600681526020017f36313030303100000000000000000000000000000000000000000000000000008152509061092a576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102699190610cf5565b50600160a060020a03841660009081526001602081815260408084209184905283205490929161095991610ed9565b81526020808201929092526040908101600090812054600160a060020a038881168352600180865284842095849052938320549116939261099991610ed9565b815260208082019290925260409081016000908120600160a060020a03891682526001808552838320948390529282205490830193926109d891610ed9565b8152602001908152602001600020600201548180546109f690610d08565b80601f0160208091040260200160405190810160405280929190818152602001828054610a2290610d08565b8015610a6f5780601f10610a4457610100808354040283529160200191610a6f565b820191906000526020600020905b815481529060010190602001808311610a5257829003601f168201915b505050505091509250925092509193909250565b8035600160a060020a0381168114610a9a57600080fd5b919050565b60008060408385031215610ab257600080fd5b610abb83610a83565b946020939093013593505050565b600060208284031215610adb57600080fd5b610ae482610a83565b9392505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600082601f830112610b2b57600080fd5b813567ffffffffffffffff80821115610b4657610b46610aeb565b604051601f8301601f19908116603f01168101908282118183101715610b6e57610b6e610aeb565b81604052838152866020858801011115610b8757600080fd5b836020870160208301376000602085830101528094505050505092915050565b60008060408385031215610bba57600080fd5b823567ffffffffffffffff80821115610bd257600080fd5b610bde86838701610b1a565b93506020850135915080821115610bf457600080fd5b50610c0185828601610b1a565b9150509250929050565b6000815180845260005b81811015610c3157602081850181015186830182015201610c15565b506000602082860101526020601f19601f83011685010191505092915050565b600160a060020a0384168152606060208201526000610c736060830185610c0b565b9050826040830152949350505050565b604081526000610c966040830185610c0b565b8281036020840152610ca88185610c0b565b95945050505050565b60008060408385031215610cc457600080fd5b610ccd83610a83565b9150602083013567ffffffffffffffff811115610ce957600080fd5b610c0185828601610b1a565b602081526000610ae46020830184610c0b565b600281046001821680610d1c57607f821691505b602082108103610d55577f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b50919050565b601f821115610da5576000818152602081206020601f86010481016020861015610d825750805b6020601f860104820191505b81811015610da157828155600101610d8e565b5050505b505050565b815167ffffffffffffffff811115610dc457610dc4610aeb565b610dd881610dd28454610d08565b84610d5b565b602080601f831160018114610e115760008415610df55750858301515b60028086026008870290910a6000190419821617865550610da1565b600085815260208120601f198616915b82811015610e4057888601518255948401946001909101908401610e21565b5085821015610e6057878501516008601f88160260020a60001904191681555b5050505050600202600101905550565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600060018201610eb157610eb1610e70565b5060010190565b828152604060208201526000610ed16040830184610c0b565b949350505050565b81810381811115610eec57610eec610e70565b9291505056fea264697066735822122082ef3d83e8101c88ac842e66aa0101c487e06f2da6c81327a8b9653b4d487a3864736f6c63430008110033"
}