{
  "abi": [
    {
      "inputs": [],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "sender",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "receiver",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "time",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "text",
          "type": "string"
        }
      ],
      "name": "Message",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "sender",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "receiver",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "index",
          "type": "uint256"
        }
      ],
      "name": "MessageCleared",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "who",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "key",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "key_type",
          "type": "string"
        }
      ],
      "name": "PublicKeyUpdated",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_to",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_index",
          "type": "uint256"
        }
      ],
      "name": "clearMessage",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_who",
          "type": "address"
        }
      ],
      "name": "getLastMessage",
      "outputs": [
        {
          "internalType": "address",
          "name": "_from",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "_text",
          "type": "string"
        },
        {
          "internalType": "uint256",
          "name": "_time",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_who",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_index",
          "type": "uint256"
        }
      ],
      "name": "getMessageByIndex",
      "outputs": [
        {
          "internalType": "address",
          "name": "_from",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "_text",
          "type": "string"
        },
        {
          "internalType": "uint256",
          "name": "_time",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_who",
          "type": "address"
        }
      ],
      "name": "getPublicKey",
      "outputs": [
        {
          "internalType": "string",
          "name": "_key",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "_key_type",
          "type": "string"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "keys",
      "outputs": [
        {
          "internalType": "string",
          "name": "key",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "key_type",
          "type": "string"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_who",
          "type": "address"
        }
      ],
      "name": "lastIndex",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "_index",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "last_msg_index",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "messages",
      "outputs": [
        {
          "internalType": "address",
          "name": "from",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "text",
          "type": "string"
        },
        {
          "internalType": "uint256",
          "name": "time",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_to",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "_text",
          "type": "string"
        }
      ],
      "name": "sendMessage",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "_key",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "_key_type",
          "type": "string"
        }
      ],
      "name": "setPublicKey",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "608060405234801561001057600080fd5b50610e42806100206000396000f3fe608060405234801561001057600080fd5b506004361061009e5760003560e01c8063857cdbb811610066578063857cdbb814610141578063c45d9bea14610154578063de6f24bb14610167578063e0c01bfe1461017a578063edc8f0d81461018d57600080fd5b8063070e3a71146100a35780631b6e23ea146100b857806342ac87cf146100eb5780634e6bd1c0146100fe578063670d14b214610120575b600080fd5b6100b66100b1366004610a06565b6101b6565b005b6100d86100c6366004610a30565b60006020819052908152604090205481565b6040519081526020015b60405180910390f35b6100b66100f9366004610af5565b6102be565b61011161010c366004610a06565b61033c565b6040516100e293929190610b9f565b61013361012e366004610a30565b610411565b6040516100e2929190610bd3565b61013361014f366004610a30565b61053d565b610111610162366004610a06565b610681565b6100b6610175366004610c01565b61073f565b610111610188366004610a30565b610827565b6100d861019b366004610a30565b6001600160a01b031660009081526020819052604090205490565b6001600160a01b03808316600090815260016020908152604080832085845282529182902080548351808501909452600684526536313031303160d01b92840192909252921633146102245760405162461bcd60e51b815260040161021b9190610c45565b60405180910390fd5b506001600160a01b038316600090815260016020818152604080842086855280835281852080546001600160a01b031916331781558251808501909352858352948790529091529101906102789082610ce3565b506040518281526001600160a01b0384169033907f68290397e9c550791c692a43bd678e06c59bc776f6f670778d58dd4d8903f5de9060200160405180910390a3505050565b3360009081526002602052604090206102d78382610ce3565b503360009081526002602052604090206001016102f48282610ce3565b50336001600160a01b03167fe963a0dc3358a0b8e4c9c301f3003bfbd501c8b1ca3497838a39b6e7208d4e328383604051610330929190610bd3565b60405180910390a25050565b6001600160a01b038281166000908152600160208181526040808420868552909152822080546002820154919092018054939460609486949091169290829061038490610c58565b80601f01602080910402602001604051908101604052809291908181526020018280546103b090610c58565b80156103fd5780601f106103d2576101008083540402835291602001916103fd565b820191906000526020600020905b8154815290600101906020018083116103e057829003601f168201915b505050505091509250925092509250925092565b60026020526000908152604090208054819061042c90610c58565b80601f016020809104026020016040519081016040528092919081815260200182805461045890610c58565b80156104a55780601f1061047a576101008083540402835291602001916104a5565b820191906000526020600020905b81548152906001019060200180831161048857829003601f168201915b5050505050908060010180546104ba90610c58565b80601f01602080910402602001604051908101604052809291908181526020018280546104e690610c58565b80156105335780601f1061050857610100808354040283529160200191610533565b820191906000526020600020905b81548152906001019060200180831161051657829003601f168201915b5050505050905082565b6001600160a01b0381166000908152600260205260409020805460609182916001820190829061056c90610c58565b80601f016020809104026020016040519081016040528092919081815260200182805461059890610c58565b80156105e55780601f106105ba576101008083540402835291602001916105e5565b820191906000526020600020905b8154815290600101906020018083116105c857829003601f168201915b505050505091508080546105f890610c58565b80601f016020809104026020016040519081016040528092919081815260200182805461062490610c58565b80156106715780601f1061064657610100808354040283529160200191610671565b820191906000526020600020905b81548152906001019060200180831161065457829003601f168201915b5050505050905091509150915091565b60016020818152600093845260408085209091529183529120805491810180546001600160a01b03909316926106b690610c58565b80601f01602080910402602001604051908101604052809291908181526020018280546106e290610c58565b801561072f5780601f106107045761010080835404028352916020019161072f565b820191906000526020600020905b81548152906001019060200180831161071257829003601f168201915b5050505050908060020154905083565b6001600160a01b038216600090815260016020818152604080842084835281852080548652925280842080546001600160a01b03191633179055905483529091200161078b8282610ce3565b506001600160a01b03821660008181526001602090815260408083208383528184208054855290835290832042600290910155928252819052815491906107d183610db9565b9190505550816001600160a01b0316336001600160a01b03167fdd99aef5e4fdfad84059320be40f5dc0f015dc4025f56bd4010608c6743bc22e428460405161081b929190610dd2565b60405180910390a35050565b60006060600080600080866001600160a01b03166001600160a01b0316815260200190815260200160002054116040518060400160405280600681526020016536313030303160d01b815250906108915760405162461bcd60e51b815260040161021b9190610c45565b506001600160a01b0384166000908152600160208181526040808420918490528320549092916108c091610df3565b815260208082019290925260409081016000908120546001600160a01b038881168352600180865284842095849052938320549116939261090091610df3565b8152602080820192909252604090810160009081206001600160a01b038916825260018085528383209483905292822054908301939261093f91610df3565b81526020019081526020016000206002015481805461095d90610c58565b80601f016020809104026020016040519081016040528092919081815260200182805461098990610c58565b80156109d65780601f106109ab576101008083540402835291602001916109d6565b820191906000526020600020905b8154815290600101906020018083116109b957829003601f168201915b505050505091509250925092509193909250565b80356001600160a01b0381168114610a0157600080fd5b919050565b60008060408385031215610a1957600080fd5b610a22836109ea565b946020939093013593505050565b600060208284031215610a4257600080fd5b610a4b826109ea565b9392505050565b634e487b7160e01b600052604160045260246000fd5b600082601f830112610a7957600080fd5b813567ffffffffffffffff80821115610a9457610a94610a52565b604051601f8301601f19908116603f01168101908282118183101715610abc57610abc610a52565b81604052838152866020858801011115610ad557600080fd5b836020870160208301376000602085830101528094505050505092915050565b60008060408385031215610b0857600080fd5b823567ffffffffffffffff80821115610b2057600080fd5b610b2c86838701610a68565b93506020850135915080821115610b4257600080fd5b50610b4f85828601610a68565b9150509250929050565b6000815180845260005b81811015610b7f57602081850181015186830182015201610b63565b506000602082860101526020601f19601f83011685010191505092915050565b6001600160a01b0384168152606060208201819052600090610bc390830185610b59565b9050826040830152949350505050565b604081526000610be66040830185610b59565b8281036020840152610bf88185610b59565b95945050505050565b60008060408385031215610c1457600080fd5b610c1d836109ea565b9150602083013567ffffffffffffffff811115610c3957600080fd5b610b4f85828601610a68565b602081526000610a4b6020830184610b59565b600181811c90821680610c6c57607f821691505b602082108103610c8c57634e487b7160e01b600052602260045260246000fd5b50919050565b601f821115610cde576000816000526020600020601f850160051c81016020861015610cbb5750805b601f850160051c820191505b81811015610cda57828155600101610cc7565b5050505b505050565b815167ffffffffffffffff811115610cfd57610cfd610a52565b610d1181610d0b8454610c58565b84610c92565b602080601f831160018114610d465760008415610d2e5750858301515b600019600386901b1c1916600185901b178555610cda565b600085815260208120601f198616915b82811015610d7557888601518255948401946001909101908401610d56565b5085821015610d935787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b634e487b7160e01b600052601160045260246000fd5b600060018201610dcb57610dcb610da3565b5060010190565b828152604060208201526000610deb6040830184610b59565b949350505050565b81810381811115610e0657610e06610da3565b9291505056fea2646970667358221220c24576891d7321e7ed94a029e8ff76f82ecda07a61b8995b13663b3915b5cbf664736f6c63430008170033",
  "deployedBytecode": "608060405234801561001057600080fd5b506004361061009e5760003560e01c8063857cdbb811610066578063857cdbb814610141578063c45d9bea14610154578063de6f24bb14610167578063e0c01bfe1461017a578063edc8f0d81461018d57600080fd5b8063070e3a71146100a35780631b6e23ea146100b857806342ac87cf146100eb5780634e6bd1c0146100fe578063670d14b214610120575b600080fd5b6100b66100b1366004610a06565b6101b6565b005b6100d86100c6366004610a30565b60006020819052908152604090205481565b6040519081526020015b60405180910390f35b6100b66100f9366004610af5565b6102be565b61011161010c366004610a06565b61033c565b6040516100e293929190610b9f565b61013361012e366004610a30565b610411565b6040516100e2929190610bd3565b61013361014f366004610a30565b61053d565b610111610162366004610a06565b610681565b6100b6610175366004610c01565b61073f565b610111610188366004610a30565b610827565b6100d861019b366004610a30565b6001600160a01b031660009081526020819052604090205490565b6001600160a01b03808316600090815260016020908152604080832085845282529182902080548351808501909452600684526536313031303160d01b92840192909252921633146102245760405162461bcd60e51b815260040161021b9190610c45565b60405180910390fd5b506001600160a01b038316600090815260016020818152604080842086855280835281852080546001600160a01b031916331781558251808501909352858352948790529091529101906102789082610ce3565b506040518281526001600160a01b0384169033907f68290397e9c550791c692a43bd678e06c59bc776f6f670778d58dd4d8903f5de9060200160405180910390a3505050565b3360009081526002602052604090206102d78382610ce3565b503360009081526002602052604090206001016102f48282610ce3565b50336001600160a01b03167fe963a0dc3358a0b8e4c9c301f3003bfbd501c8b1ca3497838a39b6e7208d4e328383604051610330929190610bd3565b60405180910390a25050565b6001600160a01b038281166000908152600160208181526040808420868552909152822080546002820154919092018054939460609486949091169290829061038490610c58565b80601f01602080910402602001604051908101604052809291908181526020018280546103b090610c58565b80156103fd5780601f106103d2576101008083540402835291602001916103fd565b820191906000526020600020905b8154815290600101906020018083116103e057829003601f168201915b505050505091509250925092509250925092565b60026020526000908152604090208054819061042c90610c58565b80601f016020809104026020016040519081016040528092919081815260200182805461045890610c58565b80156104a55780601f1061047a576101008083540402835291602001916104a5565b820191906000526020600020905b81548152906001019060200180831161048857829003601f168201915b5050505050908060010180546104ba90610c58565b80601f01602080910402602001604051908101604052809291908181526020018280546104e690610c58565b80156105335780601f1061050857610100808354040283529160200191610533565b820191906000526020600020905b81548152906001019060200180831161051657829003601f168201915b5050505050905082565b6001600160a01b0381166000908152600260205260409020805460609182916001820190829061056c90610c58565b80601f016020809104026020016040519081016040528092919081815260200182805461059890610c58565b80156105e55780601f106105ba576101008083540402835291602001916105e5565b820191906000526020600020905b8154815290600101906020018083116105c857829003601f168201915b505050505091508080546105f890610c58565b80601f016020809104026020016040519081016040528092919081815260200182805461062490610c58565b80156106715780601f1061064657610100808354040283529160200191610671565b820191906000526020600020905b81548152906001019060200180831161065457829003601f168201915b5050505050905091509150915091565b60016020818152600093845260408085209091529183529120805491810180546001600160a01b03909316926106b690610c58565b80601f01602080910402602001604051908101604052809291908181526020018280546106e290610c58565b801561072f5780601f106107045761010080835404028352916020019161072f565b820191906000526020600020905b81548152906001019060200180831161071257829003601f168201915b5050505050908060020154905083565b6001600160a01b038216600090815260016020818152604080842084835281852080548652925280842080546001600160a01b03191633179055905483529091200161078b8282610ce3565b506001600160a01b03821660008181526001602090815260408083208383528184208054855290835290832042600290910155928252819052815491906107d183610db9565b9190505550816001600160a01b0316336001600160a01b03167fdd99aef5e4fdfad84059320be40f5dc0f015dc4025f56bd4010608c6743bc22e428460405161081b929190610dd2565b60405180910390a35050565b60006060600080600080866001600160a01b03166001600160a01b0316815260200190815260200160002054116040518060400160405280600681526020016536313030303160d01b815250906108915760405162461bcd60e51b815260040161021b9190610c45565b506001600160a01b0384166000908152600160208181526040808420918490528320549092916108c091610df3565b815260208082019290925260409081016000908120546001600160a01b038881168352600180865284842095849052938320549116939261090091610df3565b8152602080820192909252604090810160009081206001600160a01b038916825260018085528383209483905292822054908301939261093f91610df3565b81526020019081526020016000206002015481805461095d90610c58565b80601f016020809104026020016040519081016040528092919081815260200182805461098990610c58565b80156109d65780601f106109ab576101008083540402835291602001916109d6565b820191906000526020600020905b8154815290600101906020018083116109b957829003601f168201915b505050505091509250925092509193909250565b80356001600160a01b0381168114610a0157600080fd5b919050565b60008060408385031215610a1957600080fd5b610a22836109ea565b946020939093013593505050565b600060208284031215610a4257600080fd5b610a4b826109ea565b9392505050565b634e487b7160e01b600052604160045260246000fd5b600082601f830112610a7957600080fd5b813567ffffffffffffffff80821115610a9457610a94610a52565b604051601f8301601f19908116603f01168101908282118183101715610abc57610abc610a52565b81604052838152866020858801011115610ad557600080fd5b836020870160208301376000602085830101528094505050505092915050565b60008060408385031215610b0857600080fd5b823567ffffffffffffffff80821115610b2057600080fd5b610b2c86838701610a68565b93506020850135915080821115610b4257600080fd5b50610b4f85828601610a68565b9150509250929050565b6000815180845260005b81811015610b7f57602081850181015186830182015201610b63565b506000602082860101526020601f19601f83011685010191505092915050565b6001600160a01b0384168152606060208201819052600090610bc390830185610b59565b9050826040830152949350505050565b604081526000610be66040830185610b59565b8281036020840152610bf88185610b59565b95945050505050565b60008060408385031215610c1457600080fd5b610c1d836109ea565b9150602083013567ffffffffffffffff811115610c3957600080fd5b610b4f85828601610a68565b602081526000610a4b6020830184610b59565b600181811c90821680610c6c57607f821691505b602082108103610c8c57634e487b7160e01b600052602260045260246000fd5b50919050565b601f821115610cde576000816000526020600020601f850160051c81016020861015610cbb5750805b601f850160051c820191505b81811015610cda57828155600101610cc7565b5050505b505050565b815167ffffffffffffffff811115610cfd57610cfd610a52565b610d1181610d0b8454610c58565b84610c92565b602080601f831160018114610d465760008415610d2e5750858301515b600019600386901b1c1916600185901b178555610cda565b600085815260208120601f198616915b82811015610d7557888601518255948401946001909101908401610d56565b5085821015610d935787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b634e487b7160e01b600052601160045260246000fd5b600060018201610dcb57610dcb610da3565b5060010190565b828152604060208201526000610deb6040830184610b59565b949350505050565b81810381811115610e0657610e06610da3565b9291505056fea2646970667358221220c24576891d7321e7ed94a029e8ff76f82ecda07a61b8995b13663b3915b5cbf664736f6c63430008170033"
}